# It2022019's Book E-Store Application

Αυτό το Readme αφορά στην εργασία του μαθήματος Τεχνολογίες Εφαρμογών Ιστού, του φοιτητή Νικόλαου Ζαπάντη με ΑΜ it2022019.

## ΠΑΡΑΔΟΤΕΑ ΑΡΧΕΙΑ
- Ένα (1) **index.html** αρχείο, το οποίο περιέχει όλη την βασική δομή του site ως προς τα buttons, τα inputs και το footer.
- Τρία (3) Javascript αρχεία:
    1. **bookstore.js**, το οποίο περιέχει όλα τα functions και τα event listeners που χρειάζονται για την ομαλή χρήση της εφαρμογής 
        - **[Αναλυτικότερη περιγραφή θα βρείτε παρακάτω]**.
    2. **db_setup.js**, το οποίο περιέχει όλες τις εντολές οι οποίες χρειάζονται για την εγκατάσταση και δημιουργία της βάσης δεδομένων που θα χρησιμοποιηθεί εντός της εφαρμογής 
        - **[Αναλυτικότερη περιγραφή θα βρείτε παρακάτω]**.
    3. **serverEndpointsAPI.js**, το οποίο περιέχει τα κατάλληλα require αλλά και τα απαραίτητα get & post endpoints που το καθένα με την χρήση [select] και [insert] αντίστοιχα κάνουν interact με την βάση δεδομένων που χρησιμοποιούμε.
- 'Ενα (1) **bookstore.css** αρχείο, το οποίο περιέχει όλα τα customizations για το UI της εφαρμογής μου.
- Ένα (1) **package.json** αρχείο, το οποίο περιέχει τα σωστά dependencies.

## Σύντομη περιγραφή χρήσης της εφαρμογής (client side)

Ο χρήστης έχει δύο (2) βασικές επιλογές στο `home page` του site, οι οποίες είναι η προσθήκη ενός καινούργιου βιβλίου ή η αναζήτηση με βάση ένα keyword.

- `Στην περίπτωση που ο χρήστης επιλέξει προσθήκη, τότε γίνεται redirect στην φόρμα συμπλήρωσης στοιχείων του βιβλίου και καταχωρεί τα δεδομένα.`
- `Στην περίπτωση που επιλέξει αναζήτηση, τότε γίνεται redirect στην σελίδα αναζήτησης στην οποία μετά την καταχώρηση του keyword εμφανίζονται όλα τα αποτελέσματα που βρέθηκαν.`

Σε οποιαδήποτε φάση της εφαρμογής ο χρήστης έχει πάντα την δυνατότητα να επιστρέψει στο `home page` πατώντας είτε Escape στο πληκτρολόγιό του είτε το αντίστοιχο home button που έχει τοποθετηθεί κατάλληλα.

Επίσης, έχουν ενταχθεί διάφοροι έλεγχοι ***[Error Handling]*** ως προς τα input που καταχωρεί ο χρήστης. Όλα τα πεδία είναι required και σαν τιμή ο χρήστης είναι υποχρεωμένος να παραθέσει έναν πραγματικό αριθμό (μεγαλύτερο του μηδενός), αλλιώς ενημερώνεται με κατάλληλο μήνυμα για τις διορθώσεις στις οποίες πρέπει να προβεί.

### Keypad Events στην εφαρμογή:

1. **Escape**: Χρησιμοποιείται κυρίως για την επιστροφή στην αρχική σελίδα και στην περίπτωση που υπάρχει το pop-up με τα αποτελέσματα στην οθόνη, 
    απλά το κλείνει και ο χρήστης μπορεί να συνεχίσει την αναζήτησή του.
2. **Enter**: Χρησιμοποιείται σε κάθε σελίδα ως keypad καταχώρησης, 
    στην φόρμα για την προσθήκη ως submit και στην σελίδα search ως κουμπί αναζήτησης.

## Αναλυτική περιγραφή των βασικών αρχείων javascript (server side)

### bookstore.js:
- **Functions**:
    1. `redirectToMainPage()`, το οποίο ουσιαστικά κάνει reload το site.
    2. `addBookToDatabase()`, το οποίο κάνει parsing τα inputs που έχει κάνει submit ο χρήστης και ελέγχει αρχικά να μην είναι blank, αλλά και κυρίως αν η τιμή που έχει δώσει ο χρήστης είναι αποδεκτή. Σε αντίθετη περίπτωση εμφανίζονται αντίστοιχα required field messages ή μηνύματα μη έγκυρης τιμής και σχόλια για την διόρθωση. Έπειτα φτιάχνω ένα const το οποίο κάνει host τα δεδομένα που μόλις έλαβα από τον χρήστη και μετά χρησιμοποιώ την POST αφού πρώτα μετατρέψω το const σε ένα json για να προσθέσω το βιβλίο στο database. Τέλος, καθαρίζω τα input fields ώστε ο χρήστης να μπορέσει να ξεκινήσει από την αρχή την προσθήκη ενός βιβλίου και χρησιμοποιώ `event.preventDefault();` για να αποφύγω τυχόν αυτόματο reset ή αλλαγή σελίδας από τον browser. 
    3. `searchBookToDatabase()`, το οποίο κάνει parsing το keyword που έχει κάνει submit ο χρήστης και το μετατρέπει σε LowerCase ελέγχοντας παράλληλα αν είναι τουλάχιστον 2 χαρακτήρες [minimum keyword characters] και έπειτα ψάχνει με βάση αυτό τα βιβλία στο database και καλεί την `displaySearchResults(res, currSearch)`. Επίσης σε αυτό το function το `searchResultsBox` γίνεται visible στην περίπτωση που βρεθούν αποτελέσματα.
    4. `displaySearchResults(res, currSearch)`, το οποίο δημιουργεί όλα τα elements του pop-up με τα αποτελέσματα, όπως copy button/ info button κλπ.
    5. `copyBookDetailsToClipboard(registerBook)`, το οποίο κάνει copy στο clipboard του χρήστη τα information του βιβλίου που επέλεξε.
    6. `toggleBookInfo(specificBook, infoBtn)`, το οποίο ουσιαστικά κάνει toggle το pop-up με τα information του αντίστοιχου βιβλίου κάθε φορά που ο χρήστης πατάει το infoBtn.
    7. `showNotification(msg)` & `hideNotification(notification)`, χρησιμοποιούνται για την εμφάνιση του custom notification box και την απόκρυψη του μετά από 4 δευτερόλεπτα με ένα timeout.
        
- **Event Listeners**:
    1. Για την απόκρυψη του custom notification box με την χρήση του close button.
    2. Δύο (2) listeners για τα buttons `Add New` & `Search` ώστε κάθε φορά να εμφανίζω το αντίστοιχο page.
    3. Για την απόκρυψη του searchResults όπου παράλληλα κλείνω και τυχόν ανοιχτό pop-up.
    4. Τα listeners που χρειάζονται για τα keypads `Escape` & `Enter` μαζί με υπο-περιπτώσεις.

### db_setup.js:
- Σε αυτό το αρχείο υπάρχουν εντολές δημιουργίας πίνακα αφού πρώτα ελεγχθεί αν υπάρχει ήδη και σε αυτήν την περίπτωση κάνω drop τον παλιό και δημιουργώ καινούργιο. Έπειτα, υπάρχουν κάποια dummy entries στα οποία έχουν συμπεριληφθεί βιβλία με το ίδιο keyword για την διευκόλυνση των UAT.

****